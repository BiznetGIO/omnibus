- config:
  - desc: configuration for test set
  - testset: "banyak"
  - scope: configuration working scope
  - url: "http://127.0.0.1:6968"
  - flask : {path: app , name: create_app}
- test: 
  - name: "TestInputZone"
  - endpoint: "api/zone"
  - method: "POST"
  - body: {template: '{"insert":{"fields":{"nm_zone": "$mock_zone"}}}'}
  - headers: {'Content-Type' : 'application/json'}
  - extract_binds: 
      - 'id_zone' : {'jmespath' : 'message.id'}
  - validators:
      - assertTrue: {jmespath: 'message.id', test: exists }
- test: 
  - name: "TestSearchZone"
  - endpoint: "api/zone"
  - method: "POST"
  - body: {template: '{"where":{"tags":{"id_zone": "$id_zone"}}}'}
  - headers: {'Content-Type' : 'application/json'}
  - validators:
      - assertTrue: {jmespath: 'message', test: exists }
- test: 
  - name: "TestSynchronizeZone"
  - endpoint: "api/sendcommand"
  - method: "POST"
  - body: {template: '{"conf-insert":{"tags":{"id_zone":"$id_zone"}}}'}
  - headers: {'Content-Type' : 'application/json'}
  - validators:
      - assertTrue: {jmespath: 'message', test: exists }
- test: 
  - name: "TestGetTTL"
  - endpoint: "api/zone"
  - method: "POST"
  - body: '{"where":{"tags":{"nm_ttl": "1800"}}}'
  - headers: {'Content-Type' : 'application/json'}
  - extract_binds:
      - 'id_ttl': {'jmespath': 'message.id'}
  - validators:
      - assertTrue: {jmespath: 'message', test: exists }
- test:
  - name: "TestGetRecordId"
  - endpoint: "api/record"
  - method: "POST"
  - body: '{"where":{"tags":{"nm_type": "CNAME"}}}'
  - headers: {'Content-Type' : 'application/json'}
  - extract_binds:
      - 'id_type': {'jmespath': 'message.id'}
  - validators:
      - assertTrue: {jmespath: 'message', test: exists}
- test: 
  - name: "TestRemoveZone"
  - endpoint: "api/zone"
  - method: "POST"
  - body: {template: '{"remove":{"tags":{"id_zone":"$id_zone"}}}'}
  - headers: {'Content-Type' : 'application/json'}
  - validators:
      - assertTrue: {jmespath: 'message', test: exists }
